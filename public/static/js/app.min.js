(function(t){function e(t){t.find(".buttons .default").attr("disabled",!0).addClass("disabled")}function i(t){t.find(".buttons .default").attr("disabled",!1).removeClass("disabled")}function n(t,e){t.find("div.error").html(e).show()}function o(){t("#interactive-mask").width(t(window).width()).height(t(document).height())}var a=null,s={width:360,height:200,title:"标题",button:"确定",cancelText:"取消",mask:!1,timeout:null,selector:null,oncomplete:null,onabort:null,ondone:null,onerror:null,ontimeout:null,animate:"show",type:"box",documentClick:!1,stay:null,bare:!1,defbtn:!0,defbtnok:!0,defbtncancel:!0,btnokClass:"",btncancelClass:"",customClass:""},r=function(e){l(e.type);var i=t("<div></div>").attr("id","interactive-"+e.type+(e.stay?"-"+e.stay.substr(1):""));i.attr("class","dialog").show().css({minWidth:e.width,zIndex:99999}).html('<div class="body"><div class="titlebar"'+(e.bare?'style="display:none"':"")+"><h1>"+e.title+'</h1><a class="closeDialog" href="javascript:void(0);">关闭</a></div><div class="client">&nbsp;</div><div class="error"></div><div class="buttons"'+(e.defbtn?"":'style="display:none"')+'><a href="#" class="normal '+e.btncancelClass+'"'+(e.defbtncancel?"":'style="display:none"')+">"+e.cancelText+'</a> <a href="#" class="default '+e.btnokClass+'"'+(e.defbtnok?"":'style="display:none"')+">"+e.button+"</a></div></div></div>"),i.addClass(e.customClass?e.customClass:""),t.browser.msie&&i.width(e.width),c(i,e),d(i,e),e.mask&&t.mask(),i.wrapInner('<div style="position:relative;"></div>');var n=i.outerHeight();return t('<iframe id="interactive-iframe"></iframe>').prependTo(i).height(n).attr("src","about:blank").css({left:-7,opacity:0,position:"absolute",top:-7,width:"100%",zIndex:"-1"}),i},l=function(e){e?t("#interactive-"+e).remove():t("#interactive-box, #interactive-alert, #interactive-dialog").remove(),0==t(".dialog:visible").length&&t("#interactive-mask").remove(),t(window).unbind("resize.mask"),a&&(clearTimeout(a),a=null)},c=function(e,i){e.find("a.closeDialog").click(function(){return i.onabort&&i.onabort.call(e[0]),i.stay?(e.hide(),0==t(".dialog:visible").length&&t("#interactive-mask").remove()):(e.remove(),0==t(".dialog:visible").length&&t("#interactive-mask").remove()),!1}),t(".buttons .default, .buttons .big-default",e).length>1&&t(".buttons:last",e).remove(),i.documentClick&&t("body").click(function(){e.find("a.closeDialog").click()});var n=e.find(".dialog-content");n.length&&"transparent"!=n.css("background-color")&&"rgba(0, 0, 0, 0)"!=n.css("background-color")&&t(".client",e).css("background-color",n.css("background-color")),e.find(".buttons .default, .buttons .normal").unbind("click").click(function(){if(t(this).hasClass("default")){if(i.oncomplete){if(0!=i.oncomplete.call(e[0]))return e.hide(),l(i.stay?"box-"+i.stay:""),!1}else e.hide(),l(i.stay?"box-"+i.stay:"");return!1}return t(this).hasClass("normal")&&i.onabort&&i.onabort.call(e[0]),e.hide(),l("box-"+i.stay),!1}),e.find(".J_DialogOK").unbind("click").click(function(){e.find(".buttons .default").click()}),e.find(".J_DialogCancel").unbind("click").click(function(){e.find(".buttons .normal").click()})},d=function(e,i){var e=e||t("#interactive-box"),n=(t(window).width()-e.outerWidth())/2+t(document).scrollLeft()>>0,o=(t(window).height()-e.outerHeight())/2+t(document).scrollTop()>>0;0>o&&(o=0),e.css({left:i.left||n,top:i.top||o})},u=function(e,i){var e=e||t("#interactive-box");t("#interactive-iframe",e).length&&t("#interactive-iframe",e).height(e.outerHeight()).width(e.outerWidth()),d(e,i)};t.extend({appAlert:function(e,i){var n={title:"提示",type:"alert"};i=t.extend({},s,n,i);var o=r(i).appendTo("body");return o.find(".client").html("<p>"+e+"</p>"),t(".buttons .normal",o).remove(),u(o,i),o},appConfirm:function(e,i){var e=e||"确定要进行该操作吗？";e='<p class="message">'+e+"</p>",i=t.extend({},s,{title:"确认"},i);var n=r(i).appendTo("body");return n.find(".client").html(e),u(n,i),n},appSprite:function(a,d){d=t.extend({},s,{title:"对话框"},d);var f=r(d).appendTo("body");t("div.submit",f).remove(),u(f,d),o();var h="ajax",p=/^(\w+:)?\/\/([^\/?#]+)/.exec(a);if(p){p=p[0];var m=location.protocol+"//"+location.host;p!==m&&(h="swfajax")}return t(".client",f).addClass("throbber"),t[h]({url:a,type:"get",success:function(s){if(1==s.substr(0,1)||2==s.substr(0,1))return l(),t.notice(s.substr(2),"error"),void 0;if(t(".client",f).removeClass("throbber").html(s),f.find(".warning").insertBefore(f.find(".client")),t(".client",f).width()>330){var r=t.browser.msie?t(".client",f).width()+30:"auto";f.width(r)}c(f,d),d.ondisplay&&d.ondisplay.call(d.link,f),u(f,d),o();var h=t("form",f);return h.length?(""==h.attr("action")&&h.attr("action",a),t(".buttons .default",f).unbind("click").click(function(){t("form:visible",f).ajaxForm({type:"POST",beforeSubmit:function(){var i=!1;if(h.find(":input").each(function(){return t(this).data("failed")?(i=!0,!1):void 0}),i)return!1;if(d.onrequirevalidate){var n=d.onrequirevalidate.call(d.link,f[0]);if(!n)return!1}e(f),t(".buttons",f).addClass("throbber")},success:function(e){t(".buttons",f).removeClass("throbber"),"1"!=e.substr(0,1)?(d.oncomplete&&d.oncomplete.call(d.link,f[0],e),d.onunload&&d.onunload.call(d.link),l(d.stay?"box-"+d.stay:void 0)):(n(f,e.substring(2)),i(f))},error:function(){f.removeClass("throbber"),n(f,"与服务器通讯时出错, 请重试"),i(f)},timeout:function(){n(f,"与服务器的通讯超时, 请重试"),i(f)}}).submit()}),void 0):(t(".buttons .default",f).unbind("click").click(function(){d.ondone&&d.ondone.call(d.link,f[0]),l()}),!1)}}),!1},appDialog:function(e,i){if("#"!=e.substr(0,1)){i=t.extend({},s,{title:"对话框",stay:"remote",bare:!1},i);var a=r(i).appendTo("body"),l=t("div.client",a);t("button.default",a).hide();var d=e;t.ajax({url:d,success:function(e){l.html(e),i.ondisplay&&i.ondisplay.call(a[0]),o(),t("button.default",a).show(),c(a,i)},error:function(){n(a,"出现了错误, 请重试")}})}else i=t.extend({},s,{title:"对话框",stay:e,mercy:!0},i),a=t("#interactive-box-"+e.substr(1)),a.get(0)?(i.mask&&t.mask(),a.show(),u(a,i)):(a=r(i).hide(),i.mercy?a.find(".client").html("").append(t(e).children().clone()):a.find(".client").html("").append(t(e).children()),i.local?a.insertAfter(t(e)):a.appendTo(document.body),c(a,i),u(a,i),a.show()),i.ondisplay&&i.ondisplay.call(a[0]);return a},appImgBox:function(e,i){function n(){i=t.extend({},s,{bare:!1,defbtn:!1,stay:"#img",mask:!0},i),o=r(i),o.addClass("djImgBox");var n=o.find("div.client"),a=t("<img>").hide();n.css({"text-align":"center"}).html(a).addClass("throbber"),t(document).bind("click.djImgBox",function(){t(document).unbind("click.djImgBox"),o.find(".closeDialog").click()}),o.click(function(t){t.stopPropagation()}),a.load(function(){var t=n.width(),e=i.height,s=a.width(),r=a.height();s>t?a.css("width",t):a.css({"padding-left":(t-s)/2+"px","padding-right":(t-s)/2+"px"}),e>r?a.css({"padding-top":(e-r)/2+"px","padding-bottom":(e-r)/2+"px"}):"",a.css("display","block"),n.removeClass("throbber"),u(o,{})}).attr("src",e)}var o,a=e.split("."),l=a[a.length-1];switch(l.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":case"bmp":return n(),o;default:}},prompt:function(){},hint:function(){},notice:function(e,i,n){var n,e=e||"",o="info";"string"==typeof arguments[1]&&(o=arguments[1]),"object"==typeof arguments[1]&&(n=arguments[1]),n=t.extend({},s,n);for(var r=["#systemnotice","#maincolumn","#content"],c=null,d=0;r.length>d;d++)if(t(r[d]).length){c=t(r[d]);break}l("notice");var u=t('<div id="interactive-notice"><a href="javascript:void(0);" class="x">关闭</a><p></p></div>').prependTo(c).addClass("notice-"+o);t("p",u).html(e),u.hide()[n.animate](),t("a.x",u).click(function(){return l("notice"),!1}),n.timeout&&(a=setTimeout(function(){t("#interactive-notice").fadeOut(function(){t(this).remove(),n.ontimeout&&n.ontimeout.call()})},n.timeout))},throbber:function(e){e||(e="正在执行, 请稍候");var i=t('<div id="interactive-throbber"></div>').appendTo(document.body);i.css({width:400}).append('<a class="cancelme remove" href="javascript:void(0);">取消</a>').append("<p>"+e+"</p>"),d(i,{}),i.find("a.cancelme").click(function(){i.remove(),t("#interactive-mask").remove(),t("#interactive-mask").remove()}),i.overlay(),t.mask()},mask:function(e){var e=t.extend({opacity:.7,animate:"show",color:"#000"},e);l("mask"),t(window).unbind("resize.mask");var i=t('<div id="interactive-mask"></div>').appendTo(document.body);i.addClass("masking")[e.animate](),i.css({width:t(window).width(),height:t(document).height(),opacity:e.opacity,backgroundColor:e.color,zIndex:99990}),i.overlay(),t(window).bind("resize.mask",function(){o()})},xlst:function(e,i,n){try{t.browser.mozilla?(xsltdoc=document.implementation.createDocument("","",null),xsltdoc.async=!1,xsltdoc.load("/ajax/peoplepicker-groups.xlst"),xslt=new XSLTProcessor,xslt.importStylesheet(xsltdoc),resultdoc=xslt.transformToFragment(e,document),t.each(resultdoc.childNodes,function(e,i){t(n).append(i)})):(xsltdoc=new ActiveXObject("Microsoft.XMLDOM"),xsltdoc.async=!1,xsltdoc.load(i),resultdoc=e.transformNode(xsltdoc),t(n).append(resultdoc))}catch(o){alert("与服务器交换数据时出错, 请重试, "+o.message)}},nowDate:function(){if("undefined"==typeof _current_date)return new Date;var t=_current_date.split(/[\- \:]/);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}}),t.fn.extend({confirm:function(o,a){var a=a||{};a.mask=!1,t(this).each(function(){t(this).click(function(){var s=t(this),r=t.confirm(o,a);if(a.precise){r.addClass("confirmbox");var c=s.offset(),d={x:"l",y:"b"},u={x:c.left-r.outerWidth()+10,y:c.top+s.outerHeight()+20};2>u.x&&(u.x=c.left-10+s.outerWidth(),d.x="r"),t(document).scrollTop()+t(window).height()-u.y<r.outerHeight()&&(u.y=u.y-r.outerHeight()-40,d.y="t"),r.css("left",u.x).css("top",u.y),r.addClass(d.x+d.y).append('<div class="tip"></div>')}return a.ondisplay&&a.ondisplay.call(s[0],r[0]),"A"==this.tagName.toUpperCase()&&t("button.default",r).unbind("click").click(function(){e(r,a),t.ajax({url:s[0].href,success:function(e){0==e.substr(0,1)&&a.oncomplete?(l(),a.oncomplete.call(s[0])):(l(),t.notice(e.substring(2),"error")),i(r,a)},error:function(t,e){n(r,e),i()}})}),!1})})},blurHint:function(e,i){i=t.extend({mode:"",blankClass:"g9"},i);var n=this,o=n.selector;return n.each(function(){(""==t(this).val()||t(this).val()==e)&&t(this).addClass(i.blankClass).val(e)}),t(o).live("focusout",function(){return this.blured&&"once"==i.mode?!0:((this.value==e||""==this.value)&&(t(this).addClass(i.blankClass),this.value=e,this.blured=!0,i&&i.onrelease&&i.onrelease.call(this,!1)),void 0)}),t(o).live("focusin",function(){this.value==e&&(this.value=""),t(this).removeClass(i.blankClass),i&&i.onengage&&i.onengage.call(this)}),n.parents("form").submit(function(){t(o).each(function(){t(this).hasClass(i.blankClass)&&t(this).removeClass(i.blankClass).val("")})}),n},spring:function(e){var i=this.each(function(){this.id.substr(7);var i=this,n=function(){t(".spring").remove(),e&&e.ondismiss&&e.ondismiss.call(i)};i.dismiss=function(){n()},t(this).mouseover(function(){var o=null;n();var a=t(i).position(),s=t('<div id="'+i.id+'-spring" class="spring"><div class="tap"><h1></h1></div><div class="body"><div class="room"></div></div></div>').appendTo(t(this).parent()).css({left:a.left-6,top:a.top+16});s.find("h1").text(t(i).text()),t("#"+i.id+"-spring-content").length&&s.find(".room").html(t("#"+i.id+"-spring-content").html()),e&&e.onrequirecontent&&e.onrequirecontent.call(i,s.find(".room")[0]),e&&e.onactive&&e.onactive.call(s.find(".room"),i),s.click(function(t){return t.stopPropagation(),!1}).mouseout(function(){o=window.setTimeout(n,500)}).mouseover(function(){window.clearTimeout(o)}),t(window).resize(function(){s.fadeOut(function(){n()})})})});return i},sprite:function(e){return t(this.selector).live("click",function(){var i=t(this),n=i.attr("href");return i.attr("title")&&(e=t.extend({},e,{title:i.attr("title")})),e.link=i,t.sprite(n,e),!1})},appDialog:function(e){return e=t.extend({},s,e),t(this).each(function(){"A"==this.tagName.toUpperCase()?t(this).click(function(){return t.appDialog(this.href,e),!1}):t.appDialog("#"+this.id,e)})},appImgBox:function(e){return e=t.extend({},s,{defbtn:!1,mask:!0},e),t(this).each(function(){"A"==this.tagName.toUpperCase()&&t(this).click(function(){return t.djImgBox(this.href,t.extend({},e,{title:this.title||e.title})),!1})})},hook:function(e){var i;return t(this).each(function(){function n(){i=setTimeout(function(){o.data("cover").hide(),e.afterHide&&e.afterHide(o,a),clearInterval(i)},100)}var o=t(this),a=t(e.cover);o.data("cover",a),o.mouseover(function(){clearInterval(i),e.beforeShow&&e.beforeShow(o,a),a.show()}).mouseout(n),a.unbind().mouseover(function(){clearInterval(i)}).mouseout(n)})},protect:function(){function e(){o.bind("keydown.protect",function(){return!1}),n.attr("disabled",!0).addClass("disabled")}function i(){o.unbind("keydown.protect"),n.attr("disabled",!1).removeClass("disabled")}if(t(this).length>1)return alert("选择器"+this.selector+"一次配置Form超过1个"),void 0;var n=t("input:submit, button.default",this),o=t(this);return o.submit(function(){e()}),{disable:function(){setTimeout(function(){e()},0)},enable:function(){setTimeout(function(){i()},0)}}},overlay:function(){return this.each(function(){var e=t(this);e.find("iframe.overlay").length&&e.find("iframe.overlay").remove();var i=t('<iframe class="overlay" src="about:blank" frameborder="0"></iframe>');i.css({position:"absolute",width:e.outerWidth(),height:e.outerHeight(),opacity:0,border:0,left:-1,top:-1,zIndex:-1}),e.prepend(i)})},notice:function(e,i){var n={className:"notice-tips",timeout:1500,top:0,left:0},i=t.extend(n,i);return this.each(function(){var n=t(this),o=n.offset(),a=n.height()+2,s=parseInt(n.css("padding-top"),10),r=parseInt(n.css("padding-left"),10);o={left:(o.left>>0)+parseInt(i.left,10),top:(o.top>>0)+parseInt(i.top,10)};var l=t("<div>"+e+"</div>").appendTo("body").css({left:o.left+r,top:o.top+s+a});l.addClass(i.className),setTimeout(function(){l.fadeOut(300,function(){t(this).remove()})},i.timeout)})}}),t.UI={},t.UI.hide=l,t.UI.destroy=function(e){return e?(t("#interactive-box-"+e.substr(1)).remove(),void 0):(t(".dialog").remove(),void 0)}})(jQuery),$(function(){var t=$("#moreList");if(t.length){var e;$(".J_more").mouseenter(function(){var i=$(this).offset().left-t.width()+$(this).width()-1,n=$(this).offset().top+$(this).height()+3;clearTimeout(e),t.css({left:i+"px",top:n+"px"}).show()}).mouseleave(function(){e=setTimeout(function(){t.hide()},100)}),t.mouseenter(function(){clearTimeout(e)}).mouseleave(function(){e=setTimeout(function(){t.hide()},100)})}$(".g-app-list li,.recommend-list li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var i=$(".J_chooseLength");$(".J_chooseLength li a").click(function(t){t.preventDefault();var e=$(this),n=e.find("input").attr("price"),o=e.find("input").attr("pricing"),a=e.find("input").val();i.find("li a").removeClass("checked"),e.addClass("checked"),e.find("input").attr("checked","checked"),$(".J_p").text(n),$(".J_length").text(a),"0"==o?$(".J_priBox").hide():($(".J_pr").text(o),$(".J_priBox").show())}),$(".J_try").click(function(){$("#dialog-try").appDialog({width:600,title:"试用须知",customClass:"confirm-dialog",bare:!1,mask:!0,btnokClass:"G-btn-default-m",btncancelClass:"G-btn-cancel-m margin",oncomplete:function(){var t=$("#sid").val(),e=$("#rid").val();$.ajax({url:"/shop.php?m=order&a=trial",data:{is_ajax:!0,rid:e,sid:t},dataType:"json",type:"post",async:!1,success:function(t){if(0==t.code)install_app();else{if(20000001==t.code)return login(),!1;alert(t.info)}}})}})}),$(".J_view").click(function(){var t=$(this),e=$(".J_appListBox");e.is(":visible")?(e.hide(),t.text("查看详情")):(e.show(),t.text("收起详情"))})}),$(function(){$(".J_payItem .item").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}).click(function(){$(".J_payItem .item").removeClass("current"),$(this).addClass("current")}),$(".J_pay").click(function(t){t.preventDefault();var e=$(".J_payItem input:checked").length;e?($("#pay_form").submit(),$("#dialog-pay").appDialog({width:680,title:"付款提示",customClass:"confirm-dialog",bare:!1,mask:!0,defbtn:!1,button:"我已完成付款",cancelText:"付款遇到问题",btnokClass:"G-btn-default-m",btncancelClass:"btn-yellow margin J_btnLink",oncomplete:function(){var t=$("#rid").val();window.location.href="/shop.php?m=order&a=list&rid="+t}})):alert("请选择支付方式")}),$("body").delegate(".J_btnLink","click",function(){$(".closeDialog").click(),window.location.href="http://bbs.hiwifi.com/thread-43219-1-1.html"}),$(".J_orderList tr").hover(function(){$(this).hasClass("blank_tr")||$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$("#length").change(function(){var t=$(this).find("option:selected").attr("price"),e=$(this).val();$(this).parents("table").find(".J_orderPrece").text(t),$(this).parents("table").find(".J_length").text(e)})});